SETLABEL BEGIN

COMMENT Load instruction at pc from rom
COMMENT First byte of pc
SET 13 1
LOAD 14 ROMPC

COMMENT Increment program counter by 1

ADD 10 13 10 JNC ENDINCPC1
SET 10 0
ADD 11 13 11
SETLABEL ENDINCPC1

COMMENT Second byte of pc
LOAD 15 ROMPC

EXEC
NOP JMP INCREMENT_PC

COMMENT SETADDR instruction implementation
COMMENT We'll have every combination of first 8 registers

SETLABEL SETADDR_PLA_MARKER

COMMENT reg0 reg0
OR 0 0 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg1 reg0
OR 0 1 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg2 reg0
OR 0 2 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg3 reg0
OR 0 3 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg4 reg0
OR 0 4 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg5 reg0
OR 0 5 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg6 reg0
OR 0 6 8 
OR 0 0 9 JMP INCREMENT_PC

COMMENT reg7 reg0
OR 0 7 8 
OR 0 0 9 JMP INCREMENT_PC





COMMENT reg0 reg1
OR 0 0 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg1 reg1
OR 0 1 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg2 reg1
OR 0 2 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg3 reg1
OR 0 3 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg4 reg1
OR 0 4 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg5 reg1
OR 0 5 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg6 reg1
OR 0 6 8 
OR 0 1 9 JMP INCREMENT_PC

COMMENT reg7 reg1
OR 0 7 8 
OR 0 1 9 JMP INCREMENT_PC




COMMENT reg0 reg2
OR 0 0 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg1 reg2
OR 0 1 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg2 reg2
OR 0 2 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg3 reg2
OR 0 3 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg4 reg2
OR 0 4 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg5 reg2
OR 0 5 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg6 reg2
OR 0 6 8 
OR 0 2 9 JMP INCREMENT_PC

COMMENT reg7 reg2
OR 0 7 8 
OR 0 2 9 JMP INCREMENT_PC



COMMENT reg0 reg3
OR 0 0 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg1 reg3
OR 0 1 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg2 reg3
OR 0 2 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg3 reg3
OR 0 3 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg4 reg3
OR 0 4 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg5 reg3
OR 0 5 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg6 reg3
OR 0 6 8 
OR 0 3 9 JMP INCREMENT_PC

COMMENT reg7 reg3
OR 0 7 8 
OR 0 3 9 JMP INCREMENT_PC



COMMENT reg0 reg4
OR 0 0 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg1 reg4
OR 0 1 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg2 reg4
OR 0 2 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg3 reg4
OR 0 3 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg4 reg4
OR 0 4 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg5 reg4
OR 0 5 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg6 reg4
OR 0 6 8 
OR 0 4 9 JMP INCREMENT_PC

COMMENT reg7 reg4
OR 0 7 8 
OR 0 4 9 JMP INCREMENT_PC



COMMENT reg0 reg5
OR 0 0 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg1 reg5
OR 0 1 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg2 reg5
OR 0 2 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg3 reg5
OR 0 3 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg4 reg5
OR 0 4 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg5 reg5
OR 0 5 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg6 reg5
OR 0 6 8 
OR 0 5 9 JMP INCREMENT_PC

COMMENT reg7 reg5
OR 0 7 8 
OR 0 5 9 JMP INCREMENT_PC



COMMENT reg0 reg6
OR 0 0 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg1 reg6
OR 0 1 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg2 reg6
OR 0 2 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg3 reg6
OR 0 3 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg4 reg6
OR 0 4 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg5 reg6
OR 0 5 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg6 reg6
OR 0 6 8 
OR 0 6 9 JMP INCREMENT_PC

COMMENT reg7 reg6
OR 0 7 8 
OR 0 6 9 JMP INCREMENT_PC



COMMENT reg0 reg7
OR 0 0 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg1 reg7
OR 0 1 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg2 reg7
OR 0 2 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg3 reg7
OR 0 3 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg4 reg7
OR 0 4 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg5 reg7
OR 0 5 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg6 reg7
OR 0 6 8 
OR 0 7 9 JMP INCREMENT_PC

COMMENT reg7 reg7
OR 0 7 8 
OR 0 7 9 JMP INCREMENT_PC

SETLABEL JUMP_INSTRUCTION_IMPLEMENTATION
OR 0 8 10
OR 0 9 11 JMP BEGIN

SETLABEL INCREMENT_PC

ADD 10 13 10 JNC BEGIN
SET 10 0
ADD 11 13 11 JMP BEGIN

SETLABEL PUSH_INSTRUCTION_IMPLEMENTATION

COMMENT SAVE_OLD_ADDRESS_TO_INSTRUCTION_REGISTERS_TEMPORARILY
OR 0 8 14
OR 0 9 15

COMMENT COPY_SP_TO_ADDRESS
SET 9 178
OR 0 12 8

STORE 10
ADD 12 13 12
OR 0 12 8
STORE 11
ADD 12 13 12

COMMENT PUT_OLD_ADDRESS_BACK
OR 0 14 8
OR 0 15 9 JMP INCREMENT_PC

SETLABEL PUSHADDR_INSTRUCTION_IMPLEMENTATION

COMMENT SAVE_OLD_ADDRESS_TO_INSTRUCTION_REGISTERS_TEMPORARILY
OR 0 8 14
OR 0 9 15

COMMENT COPY_SP_TO_ADDRESS
SET 9 178
OR 0 12 8

STORE 14
ADD 12 13 12
OR 0 12 8
STORE 15
ADD 12 13 12

COMMENT PUT_OLD_ADDRESS_BACK
OR 0 14 8
OR 0 15 9 JMP INCREMENT_PC

SETLABEL RET_INSTRUCTION_IMPLEMENTATION

COMMENT SAVE_OLD_ADDRESS_TO_INSTRUCTION_REGISTERS_TEMPORARILY
OR 0 8 14
OR 0 9 15

COMMENT COPY_SP_TO_ADDRESS
SET 9 178
OR 0 12 8

SUB 12 13 12
LOAD 11
SUB 12 13 12
LOAD 10

COMMENT PUT_OLD_ADDRESS_BACK
OR 0 14 8
OR 0 15 9 JMP INCREMENT_PC

SETLABEL POP_INSTRUCTION_IMPLEMENTATION

COMMENT SAVE_OLD_ADDRESS_TO_INSTRUCTION_REGISTERS_TEMPORARILY
OR 0 8 14
OR 0 9 15

COMMENT COPY_SP_TO_ADDRESS
SET 9 178
OR 0 12 8

SUB 12 13 12
LOAD 1
SUB 12 13 12
LOAD 2

COMMENT PUT_OLD_ADDRESS_BACK
OR 0 14 8
OR 0 15 9 JMP INCREMENT_PC

SETLABEL DRAW_INSTRUCTION_IMPLEMENTATION

SET 8 0
SET 9 179

SETLABEL DRAW_LOOP
LOAD 15

ADD 8 13 8 JNC NOCARRY_INCREMENT_ADDR_1
SET 8 0
ADD 9 13 9
SETLABEL NOCARRY_INCREMENT_ADDR_1

LOAD 14

ADD 8 13 8 JNC NOCARRY_INCREMENT_ADDR_2
SET 8 0
ADD 9 13 9
SETLABEL NOCARRY_INCREMENT_ADDR_2

LOAD 13

ADD 8 13 8 JNC NOCARRY_INCREMENT_ADDR_3
SET 8 0
ADD 9 13 9 JZ INCREMENT_PC
SETLABEL NOCARRY_INCREMENT_ADDR_3

NOP JMP DRAW_LOOP
